version: '2'

services:

  # File storage
  web_data:
    container_name: web_data
    image         : web_data
    build:
      context : .
      dockerfile: web_data.dockerfile
    volumes:
      - ./etc/nginx/conf.d/:/etc/nginx/conf.d/
      - ./var/www/html/:/var/www/html/

  # PHP install
  web_php:
    container_name: web_php
    image         : web_php
    build:
      context : .
      dockerfile: web_php.dockerfile
    volumes_from:
      - web_data

  # NGINX install
  web_server:
    container_name: web_server
    image         : web_server
    build:
      context : .
      dockerfile: web_server.dockerfile
    volumes_from:
      - web_data
    ports:
     - "8080:80"
